(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1719:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>$});var s=t(4807),i=t(2015),l=t(4950),r=t.n(l),n=t(9930),c=t(6746),o=t(7921),d=t(7812),m=t(9512),x=t(9864),h=t(6428),p=t(6868),u=t(8661),g=t(7332),v=t(6715),b=t(8640),f=t(5353),j=t(7248);function y(e){let{className:a,onCreateGame:t,...l}=e,r=(0,i.useRef)(null),[n,c]=(0,i.useState)(!1),{connected:o,publicKey:m,signMessage:x}=(0,b.v)(),h=async()=>{if(l.value)try{if(c(!0),!o||!m||!x){f.oR.error("Please connect your wallet to create a game"),c(!1);return}let e="Verify wallet ownership for GameIt: ".concat(Date.now()),a=new TextEncoder().encode(e),s=await x(a),i=await fetch("/api/verify-wallet",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,signature:j.A.encode(s),publicKey:m.toBase58()})});if(!(await i.json()).verified){f.oR.error("Wallet verification failed"),c(!1);return}let r=String(l.value);if(r.length>10&&r.endsWith("pump"))try{let e=await fetch("/api/token?address=".concat(r));if(e.ok){let a=await e.json();a.success&&a.data?t(r,a.data):t(r)}else t(r)}catch(e){console.error("Error fetching token:",e),t(r)}else t(r)}catch(e){console.error("Error in create process:",e),f.oR.error("Something went wrong. Please try again.")}finally{c(!1)}};return(0,s.jsx)("div",{className:"relative w-full",children:(0,s.jsxs)("div",{className:"relative flex items-center bg-zinc-900/80 backdrop-blur-md border border-zinc-700 rounded-xl overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex-grow flex items-center",children:[(0,s.jsx)("div",{className:"pl-4 pr-3",children:(0,s.jsx)(p.A,{className:"w-5 h-5 text-zinc-400"})}),(0,s.jsx)("div",{className:"flex-grow py-4",children:(0,s.jsx)("input",{...l,ref:r,className:"w-full bg-transparent border-none focus:outline-none text-white placeholder:text-zinc-500 text-base",style:{caretColor:"white"},disabled:n||l.disabled})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 pr-3",children:[(0,s.jsx)(u.A,{className:"w-5 h-5 text-zinc-500"}),(0,s.jsx)(d.$,{onClick:h,disabled:!l.value||n||!o,className:"bg-emerald-500 hover:bg-emerald-600 text-white font-pixel h-10",children:n?(0,s.jsxs)(s.Fragment,{children:["loading ",(0,s.jsx)(g.A,{className:"ml-1 w-4 h-4 animate-spin"})]}):(0,s.jsxs)(s.Fragment,{children:["create ",(0,s.jsx)(v.A,{className:"ml-1 w-4 h-4"})]})})]})]})})}var N=t(6231),w=t(1984),z=t(9924),k=t(1555);let A=async e=>{let a=await fetch(e,{headers:{"Cache-Control":"max-age=60, stale-while-revalidate=600"}});if(!a.ok)throw Error("Failed to fetch data");return a.json()};function C(){let{data:e,error:a}=(0,z.Ay)("/api/games?category=trending",A,{revalidateOnFocus:!1,revalidateOnReconnect:!1,dedupingInterval:6e4,suspense:!1,shouldRetryOnError:!0,errorRetryCount:3}),t=["100%","85%","90%","95%"];return(0,s.jsxs)(x.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"mb-16",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold mb-6 flex items-center justify-center font-pixel",children:["now trending ",(0,s.jsx)("span",{className:"ml-2",children:"\uD83D\uDD25"})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:a?(0,s.jsxs)("div",{className:"col-span-full text-center py-8 text-red-400",children:[(0,s.jsx)("p",{children:"Failed to load trending games. Please try again."}),(0,s.jsxs)(d.$,{variant:"outline",className:"mt-4",onClick:()=>window.location.reload(),children:[(0,s.jsx)(n.A,{className:"mr-2 h-4 w-4"})," Retry"]})]}):e?e.slice(0,4).map((e,a)=>(0,s.jsx)(h.X,{game:{id:e.id,title:e.name,image:e.imageUrl,author:e.author},index:a},e.id)):Array.from({length:4}).map((e,a)=>(0,s.jsxs)("div",{className:"bg-zinc-800/50 rounded-lg h-64 flex flex-col overflow-hidden",children:[(0,s.jsx)("div",{className:"h-40 bg-zinc-700/50 animate-pulse"}),(0,s.jsxs)("div",{className:"p-3 space-y-2",children:[(0,s.jsx)("div",{className:"h-5 bg-zinc-700/70 rounded animate-pulse",style:{width:t[a%t.length]}}),(0,s.jsx)("div",{className:"h-4 bg-zinc-700/50 rounded animate-pulse",style:{width:t[(a+2)%t.length]}})]})]},a))})]})}function P(){let[e,a]=(0,i.useState)(!1),{data:t,error:l}=(0,z.Ay)(e?"/api/games?category=community":null,A,{revalidateOnFocus:!1});return(0,i.useEffect)(()=>{let e=new IntersectionObserver(t=>{let[s]=t;s.isIntersecting&&(a(!0),e.disconnect())},{threshold:.1}),t=document.getElementById("community-section");return t&&e.observe(t),()=>e.disconnect()},[]),(0,s.jsxs)(x.P.div,{id:"community-section",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-6 text-center font-pixel",children:"from the trenches"}),(0,s.jsxs)("div",{className:"bg-zinc-800/30 backdrop-blur-md rounded-xl p-4",children:[(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[(0,s.jsx)(d.$,{variant:"outline",className:"bg-white text-black border-transparent hover:bg-zinc-200 font-pixel",children:"featured"}),(0,s.jsx)(d.$,{variant:"outline",className:"bg-transparent text-zinc-400 border-zinc-700 hover:bg-zinc-700 hover:text-white font-pixel",children:"freshly minted"}),(0,s.jsxs)("div",{className:"relative ml-auto",children:[(0,s.jsx)(m.p,{className:"bg-transparent border-zinc-700 pl-9 h-9 w-48 text-sm",placeholder:"search games..."}),(0,s.jsx)(c.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-500"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-zinc-400",children:[(0,s.jsx)("span",{children:"sort:"}),(0,s.jsx)(d.$,{variant:"outline",className:"h-9 bg-transparent border-zinc-700 text-zinc-400 hover:bg-zinc-700 hover:text-white font-pixel",children:"featured at ▼"}),(0,s.jsx)(d.$,{variant:"outline",className:"h-9 bg-transparent border-zinc-700 text-zinc-400 hover:bg-zinc-700 hover:text-white font-pixel",children:"newest ▼"})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l?(0,s.jsxs)("div",{className:"col-span-full text-center py-8 text-red-400",children:[(0,s.jsx)("p",{children:"Failed to load community games. Please try again."}),(0,s.jsxs)(d.$,{variant:"outline",className:"mt-4",onClick:()=>a(!0),children:[(0,s.jsx)(n.A,{className:"mr-2 h-4 w-4"})," Retry"]})]}):t?t.slice(0,3).map(e=>{let a="/placeholder.svg"===e.imageUrl||"/placeholder-logo.svg"===e.imageUrl;return(0,s.jsxs)("div",{className:"bg-zinc-800/60 backdrop-blur-md rounded-xl overflow-hidden border border-zinc-700/50 hover:border-emerald-500/50 transition-all duration-300 ease-in-out flex flex-col group hover:shadow-2xl hover:shadow-emerald-500/20",children:[(0,s.jsxs)("div",{className:"relative w-full h-48 ".concat(a?"bg-zinc-700 flex items-center justify-center":"bg-black"),children:[(0,s.jsx)("img",{src:e.imageUrl||"/placeholder.svg",alt:e.name,className:"w-full h-full ".concat(a?"object-contain p-8 opacity-30":"object-cover"," group-hover:scale-105 transition-transform duration-300")}),a&&(0,s.jsx)(o.A,{className:"w-16 h-16 text-zinc-500 absolute"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-zinc-800/80 via-transparent to-transparent opacity-70 group-hover:opacity-100 transition-opacity"})]}),(0,s.jsxs)("div",{className:"p-4 flex flex-col flex-grow",children:[(0,s.jsx)("h3",{className:"text-xl text-white font-pixel mb-1 truncate group-hover:text-emerald-400 transition-colors",children:e.name}),(0,s.jsxs)("p",{className:"text-xs text-zinc-400 mb-3",children:["by ",(0,s.jsx)("span",{className:"text-zinc-300",children:(0,w.M)(e.author)})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)("span",{className:"text-xs text-zinc-500 uppercase font-pixel tracking-wider",children:"Mkt. Cap"}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5 ml-auto",children:[(0,s.jsx)("img",{src:e.imageUrl||"/placeholder-logo.svg",alt:"",className:"w-4 h-4 rounded-full bg-zinc-700 object-cover border border-zinc-600"}),(0,s.jsx)("span",{className:"text-sm text-white font-medium",children:e.marketCap})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-xs text-zinc-400 mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)(c.A,{size:13,className:"text-emerald-400/70"}),(0,s.jsxs)("span",{children:[e.plays.toLocaleString()," Plays"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)(n.A,{size:13,className:"text-emerald-400/70"}),(0,s.jsxs)("span",{children:[e.forks," Forks"]})]})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1.5 mb-4",children:e.tags.slice(0,3).map(e=>(0,s.jsx)("span",{className:"text-[10px] bg-zinc-700/80 text-zinc-300 px-2 py-0.5 rounded-full font-pixel",children:e},e))}),(0,s.jsxs)("div",{className:"mt-auto pt-3 border-t border-zinc-700/70 flex items-center justify-between",children:[(0,s.jsx)("p",{className:"text-xs text-zinc-500",children:e.timestamp}),(0,s.jsx)(r(),{href:"/play/".concat(e.id),passHref:!0,children:(0,s.jsxs)(d.$,{size:"sm",variant:"ghost",className:"bg-emerald-600/80 hover:bg-emerald-500 text-white font-pixel text-xs px-4 py-1.5 h-auto rounded-md group-hover:shadow-lg group-hover:shadow-emerald-500/30 transition-all",children:["Launch Game ",(0,s.jsx)("span",{className:"ml-1.5 group-hover:translate-x-1 transition-transform",children:"→"})]})})]})]})]},e.id)}):Array.from({length:3}).map((e,a)=>(0,s.jsxs)("div",{className:"bg-zinc-800/60 rounded-xl overflow-hidden flex flex-col border border-zinc-700/50",children:[(0,s.jsx)("div",{className:"h-48 bg-zinc-700/50 animate-pulse"}),(0,s.jsxs)("div",{className:"p-4 space-y-3",children:[(0,s.jsx)("div",{className:"h-5 bg-zinc-700/70 w-3/4 rounded animate-pulse"}),(0,s.jsx)("div",{className:"h-4 bg-zinc-700/50 w-1/2 rounded animate-pulse"}),(0,s.jsx)("div",{className:"h-10 mt-4 bg-zinc-700/30 rounded animate-pulse"})]})]},a))})]})]})}function $(){let[e,a]=(0,i.useState)(""),[t,l]=(0,i.useState)(!1),[r,c]=(0,i.useState)(""),[o,m]=(0,i.useState)(void 0),{connected:h}=(0,b.v)();return(0,s.jsxs)(k.A,{children:[(0,s.jsxs)("div",{className:"max-w-3xl mx-auto pt-16",children:[(0,s.jsx)(x.P.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-4xl font-bold text-center mt-24 mb-8 font-pixel",children:"what do you want to create?"}),(0,s.jsx)(x.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"relative mb-8",children:(0,s.jsx)(y,{value:e,onChange:e=>a(e.target.value),placeholder:h?"enter solana token address or your game idea...":"connect your wallet to create games...",onCreateGame:(e,a)=>{console.log("handleCreateGame called with input:",e,"and tokenData:",a),c(a?"":e),m(a),l(!0)},disabled:!h})}),(0,s.jsxs)(x.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"flex flex-wrap gap-2 justify-center mb-16",children:[(0,s.jsx)(d.$,{variant:"outline",className:"bg-zinc-800/80 backdrop-blur-md hover:bg-zinc-700 text-white border-zinc-700 font-pixel",children:"GIGA Run"}),(0,s.jsx)(d.$,{variant:"outline",className:"bg-zinc-800/80 backdrop-blur-md hover:bg-zinc-700 text-white border-zinc-700 font-pixel",children:"xAI Clicker"}),(0,s.jsx)(d.$,{variant:"outline",className:"bg-zinc-800/80 backdrop-blur-md hover:bg-zinc-700 text-white border-zinc-700 font-pixel",children:"Solana RPG Game"}),(0,s.jsx)(d.$,{variant:"outline",className:"bg-zinc-800/80 backdrop-blur-md hover:bg-zinc-700 text-white border-zinc-700 w-10 h-10 p-0",children:(0,s.jsx)(n.A,{className:"w-4 h-4"})})]}),(0,s.jsx)(C,{}),(0,s.jsx)(P,{})]}),(0,s.jsx)(N.K,{isOpen:t,onClose:()=>l(!1),initialInput:r,tokenData:o})]})}},3737:(e,a,t)=>{Promise.resolve().then(t.bind(t,1719))},6428:(e,a,t)=>{"use strict";t.d(a,{X:()=>d});var s=t(4807),i=t(9864),l=t(1562),r=t(7812),n=t(4950),c=t.n(n),o=t(1984);function d(e){let{game:a,index:t}=e;return(0,s.jsx)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*t},whileHover:{y:-5},className:"bg-zinc-800/50 backdrop-blur-md rounded-lg overflow-hidden border border-zinc-700/50 hover:border-emerald-500/30 transition-colors",children:(0,s.jsxs)("div",{className:"p-4 flex flex-col gap-3",children:[(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)(l.default,{src:a.image||"/placeholder.svg",width:300,height:150,alt:a.title,className:"rounded-md w-full h-32 object-cover"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium font-pixel",children:a.title}),(0,s.jsxs)("p",{className:"text-xs text-zinc-400 mt-1",children:["by ",(0,o.M)(a.author)]})]}),(0,s.jsx)(c(),{href:"/play/".concat(a.id),passHref:!0,children:(0,s.jsx)(r.$,{size:"sm",className:"w-full bg-emerald-600/80 hover:bg-emerald-500 text-white font-pixel transition-all duration-200 ease-in-out hover:shadow-lg hover:shadow-emerald-500/30",children:"Play"})})]})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[571,407,950,299,687,562,109,461,555,612,436,984,358],()=>a(3737)),_N_E=e.O()}]);